"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[359],{3359:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});const a={data:function(){return{fields:null,avatarUrl:"",isUpdate:!1,isSended:!1}},methods:{formHandler:function(){var e=this;if(this.isSended=!0,this.isSelectedCheckboxes){this.isUpdate=!0;var s=new FormData;for(var t in this.fields)if("avatar"!==t||this.fields[t])if(Array.isArray(this.fields[t]))for(var a in this.fields[t])s.append(t,this.fields[t][a]);else s.append(t,this.fields[t]);s.append("_method","PUT"),axios({method:"POST",url:"/api/front/partner",data:s,headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.isUpdate=!1}))}},updateAvatar:function(e){this.fields.avatar=e.target.files[0],this.avatarUrl=URL.createObjectURL(e.target.files[0])}},computed:{typesJobs:function(){return this.$store.state.typesJobs},regions:function(){return this.$store.state.regions},isSelectedCheckboxes:function(){return Boolean(this.fields["type_jobs_partners[]"].length&&this.fields["regions_partners[]"].length)}},mounted:function(){var e=this;this.$store.dispatch("getTypeJobs"),this.$store.dispatch("getRegions"),axios.get("/api/front/partner").then((function(s){var t=s.data;t.data["regions_partners[]"]=t.data.regions_partners.map((function(e){return e.region_id})),delete t.data.regions_partners,t.data["type_jobs_partners[]"]=t.data.type_jobs_partners.map((function(e){return e.type_job_id})),delete t.data.type_jobs_partners,e.fields=t.data,e.fields.avatar?e.avatarUrl=e.fields.avatar:e.avatarUrl="/images/default-avatar.webp",e.fields.avatar=""}))}};const l=(0,t(1900).Z)(a,(function(){var e=this,s=e.$createElement,t=e._self._c||s;return e.fields?t("form",{class:{"opacity-50 pe-none":e.isUpdate},on:{input:function(s){e.isSended=!1},submit:function(s){return s.preventDefault(),e.formHandler.apply(null,arguments)}}},[t("h4",{staticClass:"d-block d-lg-none mb-3"},[e._v(e._s(e.trans("info")))]),e._v(" "),t("label",{staticClass:"form-photo"},[t("input",{attrs:{type:"file",accept:"image/*"},on:{change:e.updateAvatar}}),e._v(" "),t("img",{staticClass:"form-photo__img",attrs:{src:e.avatarUrl,alt:""}}),e._v(" "),t("p",{staticClass:"form-photo__label"},[e._v(e._s(e.trans("change-photo")))])]),e._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.company")+"*",type:"text",required:"",placeholder:e.trans("form-labels.company")+"*"},model:{value:e.fields.company,callback:function(s){e.$set(e.fields,"company",s)},expression:"fields.company"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.phone")+"*",type:"text",required:"",placeholder:e.trans("form-labels.phone")+"*"},model:{value:e.fields.phone,callback:function(s){e.$set(e.fields,"phone",s)},expression:"fields.phone"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.name")+"*",type:"text",required:"",placeholder:e.trans("form-labels.name")+"*"},model:{value:e.fields.name,callback:function(s){e.$set(e.fields,"name",s)},expression:"fields.name"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.lastname")+"*",type:"text",required:"",placeholder:e.trans("form-labels.lastname")+"*"},model:{value:e.fields.lastname,callback:function(s){e.$set(e.fields,"lastname",s)},expression:"fields.lastname"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.postcode")+"*",type:"number",required:"",placeholder:e.trans("form-labels.postcode")+"*"},model:{value:e.fields.postcode,callback:function(s){e.$set(e.fields,"postcode",s)},expression:"fields.postcode"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.city")+"*",type:"text",required:"",placeholder:e.trans("form-labels.city")+"*"},model:{value:e.fields.city,callback:function(s){e.$set(e.fields,"city",s)},expression:"fields.city"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.street")+"*",type:"text",required:"",placeholder:e.trans("form-labels.street")+"*"},model:{value:e.fields.street,callback:function(s){e.$set(e.fields,"street",s)},expression:"fields.street"}})],1),e._v(" "),t("div",{staticClass:"col-sm-6 mt-4"},[t("form-field",{attrs:{label:e.trans("form-labels.house-number")+"*",type:"text",required:"",placeholder:e.trans("form-labels.house-number")+"*"},model:{value:e.fields.house,callback:function(s){e.$set(e.fields,"house",s)},expression:"fields.house"}})],1)]),e._v(" "),t("h5",{staticClass:"mt-5"},[e._v(e._s(e.trans("form-labels.jobs"))+"*:")]),e._v(" "),t("div",{staticClass:"row"},e._l(e.typesJobs,(function(s){return t("div",{key:s.id,staticClass:"col-md-4 mt-4"},[t("form-checkbox",{attrs:{val:s.id,label:s.name},model:{value:e.fields["type_jobs_partners[]"],callback:function(s){e.$set(e.fields,"type_jobs_partners[]",s)},expression:"fields['type_jobs_partners[]']"}})],1)})),0),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:!e.fields["type_jobs_partners[]"].length&&e.isSended,expression:"!fields['type_jobs_partners[]'].length && isSended"}],staticClass:"text-danger mt-3"},[e._v(e._s(e.trans("err-empty-list")))]),e._v(" "),t("h5",{staticClass:"mt-5"},[e._v(e._s(e.trans("form-labels.regions"))+"*:")]),e._v(" "),t("div",{staticClass:"row"},e._l(e.regions,(function(s){return t("div",{key:s.id,staticClass:"col-md-4 mt-4"},[t("form-checkbox",{attrs:{val:s.id,label:s.name},model:{value:e.fields["regions_partners[]"],callback:function(s){e.$set(e.fields,"regions_partners[]",s)},expression:"fields['regions_partners[]']"}})],1)})),0),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:!e.fields["regions_partners[]"].length&&e.isSended,expression:"!fields['regions_partners[]'].length && isSended"}],staticClass:"text-danger mt-3"},[e._v(e._s(e.trans("err-empty-list")))]),e._v(" "),t("input",{staticClass:"mt-4",attrs:{type:"submit"},domProps:{value:e.trans("save")}})]):e._e()}),[],!1,null,null,null).exports}}]);